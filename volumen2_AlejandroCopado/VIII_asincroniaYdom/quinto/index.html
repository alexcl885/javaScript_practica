<!--
5. Implementa un programa Javascript que muestre los posts de un foro mediante promesas:
• Listado de posts: https://jsonplaceholder.typicode.com/posts
• Listado de usuarios: https://jsonplaceholder.typicode.com/users/1, siendo 1 el id del usuario
a. Genera dinámicamente el listado de posts. Se mostrará el title y body.
b. Para cada post consulta los datos del usuario que lo ha escrito. Debajo de cada post se
mostrará el nombre y correo del usuario correspondiente.
c. Usa CSS para dar formato.
d. Añade una caja de texto a modo de buscador en la parte superior. Cuando está vacía se
muestran todos los posts. Si el usuario escribe la palabra “aut” se filtrará el listado mos‑
trando aquellos posts que contienen dicha palabra en el campo título.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
     
    </div>

    <script>
      function titleANDbodyLibros() {
        fetch("https://jsonplaceholder.typicode.com/posts")
          .then((response) => response.json())
          .then((libros) => {
            libros.forEach((libro) => {
              const titulo = document.createElement("h4");
              const body = document.createElement("p");
              const usuario = document.createElement("p");

              console.log(libro.title);
              titulo.innerText = `TITULO: ${libro.title}`;
              console.log(libro.body);
              body.innerText = `BODY: ${libro.body}`;
              usuario.innerText = `USUARIO: ${libro.userId} `;

              document.body.appendChild(titulo);
              document.body.appendChild(usuario);
              document.body.appendChild(body);

              fetch(`https://jsonplaceholder.typicode.com/users/${usuario}`)
                .then((response) => response.json())
                .then((usuario) => {
                  const name = document.createElement("p");
                  const username = document.createElement("p");

                  name.innerText = usuario.name;
                  username.innerText = usuario.username;
                  document.body.appendChild(name);
                  document.body.appendChild(username);
                })
                .catch(error => { 
                    console.log("error=>" + error);
                });

            });
          })
          .catch((error) => {
            console.log("ERROR => " + error);
          });
      }
      titleANDbodyLibros();
    </script>
  </body>
</html>
